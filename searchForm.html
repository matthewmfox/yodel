<!DOCTYPE html>

<!--
    Victoria C. Jones
    -->
<html>

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <title>Search Form</title>

    <!-- Load style sheets -->
    <link rel="stylesheet" type="text/css" href="mainLayout.css" />
    <script type="text/javascript" src="jquery-1.9.0.min.js"></script>
    <link rel="stylesheet" href="jquery-ui-1.11.4.custom/jquery-ui.min.css">
    <script src="jquery-ui-1.11.4.custom/external/jquery/jquery.js"></script>
    <script src="jquery-ui-1.11.4.custom/jquery-ui.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function() {
            var whoCheckBox = $("#whoCheckBox").button();
            var whenCheckBox = $("#whenCheckBox").button();
            var whereCheckBox = $("#whereCheckBox").button();

            var doPretendThingsWithSearchResults = function() {
                alert("Hello");
            }

            

            
            var dialog = $( "#dialog-form" ).dialog({
              autoOpen: false,
              modal: true, // can black out the rest of the page
              width:400,
              minWidth: 400,
              buttons: {
                "Search": doPretendThingsWithSearchResults,
                Cancel: function() {
                  dialog.dialog( "close" );
                }
              },
              close: function() {
                form[ 0 ].reset(); // reset the first occurence of form that you find, which is the only form
              }
            });

            var goButton = $( "#goButton" ).button().click( function() {
                dialog.dialog( "open" );
            })

            var form = dialog.find( "form" ).on( "submit", function( event ) {
                //event.preventDefault();
                //someFunctionThatHandlesFormInputButNotReally();
                });

            $( "#location, #numPeople" ).tooltip({
                // my: is the tooltip, 15 is the offset from the target
                // moved tooltip so that it doesn't run into autocomplete
                position: { my: "left+30 center", at: "right center" }
            }); // displays the title
            
            var findPlanDropDown = $( "#findPlanDropDown").selectmenu();
            
            var numPeople = $( "#numPeople").spinner();
            $( "#numPeople").spinner({
                min: 1
            });

            var numAdditionalPeople = $( "#numAdditionalPeople"); 
            $( "#numAdditionalPeople").spinner({
                min: 1
            });

            var peopleFunction = function () {
                if ( ! whoCheckBox[0].checked) {
                    numPeople.spinner( "enable" );
                    numAdditionalPeople.spinner( "enable");
                } else {
                    numPeople.spinner( "disable" );
                    numAdditionalPeople.spinner( "disable");
                }
            };

            whoCheckBox.click(peopleFunction);


            var fromDate = $( "#fromDate" ).datepicker({
                defaultDate: "+1w",
                changeMonth: true,
                numberOfMonths: 1,
                minDate: new Date(),
                onClose: function( selectedDate ) {
                    $( "#toDate" ).datepicker( "option", "minDate", selectedDate );
                    var selected = new Date(selectedDate)
                    selected.setDate(selected.getDate()+7); // a week from now
                    $( "#toDate" ).datepicker( "option", "defaultDate", selected);
                }
            });
            var toDate = $( "#toDate" ).datepicker({
                defaultDate: "+1w",
                changeMonth: true,
                numberOfMonths: 1,
                onClose: function( selectedDate ) {
                    $( "#fromDate" ).datepicker( "option", "maxDate", selectedDate );
                }
            });
            
// http://jsfiddle.net/trixta/cc7Rt/light/
// might want calendar to always be visible instead of appearing and overlapping other items.


            var calendarFunction = function () {
               if (!whenCheckBox[0].checked) {
                    toDate.datepicker( "option", "disabled" , false );
                    fromDate.datepicker(  "option", "disabled" , false );
                } else {
                    toDate.datepicker(  "option", "disabled" , true );
                    fromDate.datepicker( "option", "disabled" , true );
                } 
            };

            whenCheckBox.click(calendarFunction);


            var location = $( "#location").prop('disabled', true) ;

            var locationFunction = function() {
                // http://api.jquery.com/prop/
                if ( !whereCheckBox[0].checked) {
                    location.prop('disabled', false);
                } else {
                    location.prop('disabled', true) ;
                }
            };

            //Things are initially disabled
            peopleFunction();
            calendarFunction();
            locationFunction();

            whereCheckBox.click(locationFunction);

            var availableLocations = [ "Yosemite", "Mt. Everest", "Candy Mountain", "Boston, MA", "MA", "NY", "02139"];

            $( "#location" ).autocomplete({
              source: availableLocations
            });

            $( "input[type=submit]").button().click(function( event ) {
                event.preventDefault();
            });

            var changeFormInputs  = function (selectedItem) {
                if (selectedItem == "Plan") {
                    $("#findPeople").show("fade", "fast")
                    //can't hide the buttons, so hide labels
                    $("#whoLabel").hide();
                    $("#whenLabel").hide();
                    $("#whereLabel").hide();
                    numPeople.spinner( "enable" );
                    numAdditionalPeople.spinner( "enable");
                    $( "#fromDate" ).prop('disabled', false) ;
                    $( "#toDate" ).prop('disabled', false) ;
                    $( "#location" ).prop('disabled', false) ;
                } else {
                    $("#findPeople").hide()
                    $("#whoLabel").show();
                    $("#whenLabel").show();
                    $("#whereLabel").show();
                    peopleFunction();
                    calendarFunction();
                    locationFunction();
                }
            }


            findPlanDropDown.selectmenu({
              select: function( event, ui ) {
                changeFormInputs(ui.item.value);
              }
            });

            $("#findPeople").hide(); //initially hidden 
        });
    </script>

    <style>

    select {
      width: 200px;
    }

    #numPeople, #numAdditionalPeople {
        width: 50px;
    }

    #toDate, #fromDate {
        width :165px;
    }

    fieldset {
      border: 0;
      padding: 10px;
    }

    body { 
        font-size: 72.5%;
    }

    #dialog-form {
        padding: 20px;
        
    }


    </style>

</head>

<body>

<button id="goButton">Go</button>

<div id="dialog-form" title="Let's go Exploring">
<form id="searchForm">
    <label for="findPlanDropDown">I would like to </label>
    <select name="findPlanDropDown" id="findPlanDropDown">
      <option selected="selected">Find</option>
      <option>Plan</option>
    </select><label for="findPlanDropDown"> a trip</label>
    <br>
    <hr>


    <!--Who-->
    <label>Who: </label> <input id="whoCheckBox" type="checkbox" name="who" checked><label for="whoCheckBox" id="whoLabel">Anyone </label>
    <fieldset>
        <input type="text" id="numPeople" name="numPeople" title="people in my party (including myself)"><div id="findPeople"><label for="numAdditionalPeople"> looking for</label> <input type="text" id="numAdditionalPeople" name="numAdditionalPeople" ><label for="numAdditionalPeople"> more </label> </div>
    </fieldset>
    

    <!--When-->

    <label >When: </label> <input id="whenCheckBox" type="checkbox" name="when" checked><label for="whenCheckBox" id="whenLabel">Anytime</label>
    <fieldset>
        <table>
            <tr>
                <td><label for="fromDate">From: </label></td>
                <td><label for="toDate">To: </label></td>
            </tr>
            <tr>
                <td><input id="fromDate" type="text" name="fromDate" ></td>
                <td><input id="toDate" type="text" name="toDate"></td>
            </tr>
        </table>
    <br>
    </fieldset>

    <!--Where-->

    <label >Where: </label><input id= "whereCheckBox" type="checkbox" name="where" checked><label for="whereCheckBox" id = "whereLabel">Anywhere </label>
    <fieldset >
        <input type="text" id="location" title= "Enter a Mountain Name, City, State, or Zipcode"  value="" >
    </fieldset>

    <input type="submit" tabindex="-1" style="position:absolute; top:-1000px">
</form> 
</div>
</body>

</html>
