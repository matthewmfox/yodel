<!DOCTYPE html>

<!--
    Victoria C. Jones
    -->
<html>

<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <title>Search Form</title>

    <!-- Load style sheets -->
    <script type="text/javascript" src="jquery-1.9.0.min.js"></script>
    <link rel="stylesheet" href="jquery-ui-1.11.4.custom/jquery-ui.min.css">
    <script src="jquery-ui-1.11.4.custom/external/jquery/jquery.js"></script>
    <script src="searchForm.js"></script>
    <script src="jquery-ui-1.11.4.custom/jquery-ui.min.js"></script>

    <script type="text/javascript">
    $(document).ready(function(){
        var whoCheckBox = $("#whoCheckBox");
        var whenCheckBox = $("#whenCheckBox");
        var whereCheckBox = $("#whereCheckBox");
        var tip = $(".tip");
        var numPeople = $( "#numPeople");
        numPeople.spinner({
            min: 1
        });
        var numAdditionalPeople = $( "#numAdditionalPeople"); 
        numAdditionalPeople.spinner({
            min: 1
        });

	toolbarFunction();
	
	var home = $("#logo").button();

	home.click(function() {
	    document.location = 'searchForm.html';	    
	});
	

        whoCheckBox.click(function() {
          peopleFunction(whoCheckBox,numPeople,numAdditionalPeople);
        });


        var fromDate = $( "#fromDate" ).datepicker({
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 1,
            minDate: new Date(),
            onClose: function( selectedDate ) {
                $( "#toDate" ).datepicker( "option", "minDate", selectedDate );
                var selected = new Date(selectedDate)
                selected.setDate(selected.getDate()+7); // a week from now
                $( "#toDate" ).datepicker( "option", "defaultDate", selected);
            }
        });
        
        var toDate = $( "#toDate" ).datepicker({
            defaultDate: "+0w",
            changeMonth: true,
            numberOfMonths: 1,
            minDate: new Date(),
            onClose: function( selectedDate ) {
                $( "#fromDate" ).datepicker( "option", "maxDate", selectedDate );
            }
        });

        weekfromNow = new Date();
        weekfromNow.setDate(weekfromNow.getDate() +7);
        fromDate.datepicker('setDate', new Date());
        toDate.datepicker('setDate', weekfromNow);

        whenCheckBox.click(function() {
            calendarFunction(whenCheckBox, toDate, fromDate);
        });

        var destination = $( "#destination");
        //Things are initially disabled
        setAllFields(whoCheckBox, numPeople, numAdditionalPeople, whenCheckBox, fromDate, toDate, whereCheckBox, destination);
        whereCheckBox.click(function() {
            destinationFunction(whereCheckBox,destination);
    });

        $( "input[type=submit]").button().click(function( event ) {
            event.preventDefault();
        });

        $("#findPeople").hide(); //initially hidden 

        var findPlanDropDown = $( "#findPlanDropDown");

        var dialog = $( "#dialog-form" ).dialog({
          autoOpen: false,
          draggable: false,
          modal: true, // can black out the rest of the page
          width:400,
          minWidth: 400,
          buttons: {
            "Search": function() {
                toSearchResults(findPlanDropDown, tip, whoCheckBox, numPeople, numAdditionalPeople, whenCheckBox, fromDate, toDate, whereCheckBox, destination);
            },
            Cancel: function() {
              dialog.dialog( "close" );
            }
          },
          close: function() {
            //clear fields of  the first occurence of form that you find, which is the only form
            form[0].reset(); 
            whoCheckBox.checked = true;
            whenCheckBox.checked = true; 
            whereCheckBox.checked = true;
            setAllFields(whoCheckBox, numPeople, numAdditionalPeople, whenCheckBox, fromDate, toDate, whereCheckBox, destination);
          }
        });


        var form = dialog.find( "form" );

        var goButton = $( "#goButton" ).button().click( function() {
            dialog.dialog( "open" );
        })


        findPlanDropDown.selectmenu({
          select: function( event, ui ) {
            changeFormInputs(ui.item.value, whoCheckBox, numPeople, numAdditionalPeople, whenCheckBox, fromDate, toDate, whereCheckBox, destination);
          }
        });

        var availableDestinations = [ "Yosemite", "Mt. Everest", "Candy Mountain", "Boston, MA", "MA", "NY", "02139"];

        $( "#destination" ).autocomplete({
          source: availableDestinations
    });
    });
    </script>

    <style>

    select {
      width: 200px;
    }

    * {
	font-family: "Helvetica Neue",Helvetica,Arial,sans-serif !important;
    }

    #toolbar {
	padding: 4px;
	position: absolute;    
        display: inline-block;
	width: 80%;
	left: 9.75%;
    }

    #numPeople, #numAdditionalPeople {
        width: 50px;
        margin: 3px;
    }

    #toDate, #fromDate {
        width :165px;
    }

    fieldset {
      border: 0;
      padding: 10px;
    }

    body { 
        font-size: 72.5%;
    }

    #dialog-form {
        padding: 20px;
        
    }

    #goButton {
        width: 20%;
        left: 40%;
        font-weight: bold;
        font-size: xx-large;
        position: absolute;
        top: 50%;
    }

    .tip {
        text-align: center;

    }


    </style>

</head>

<body background= "mtn.jpg">


<div id="toolbar" class="ui-widget-header ui-corner-all">
    <button id="logo">Yodel Logo</button>
    <input type="text" id="search" placeholder="Search for People, Trips, or Mountrains" style="font-style:italic; margin-left: 20px; width: 200px;" ></input>
    <!--Because of the float, the items go in backwards-->
    
</div>
<br>
<br>

<button id="goButton">Start/Join a Trip!</button>

<div id="dialog-form" title="Let's go Exploring">
<form id="searchForm">
    <label for="findPlanDropDown">I would like to </label>
    <select name="findPlanDropDown" id="findPlanDropDown">
      <option selected="selected">Find</option>
      <option>Plan</option>
    </select><label for="findPlanDropDown"> a trip</label>
    <p class="tip"><p>
    <hr>


    <!--Who-->
    <label>Who: </label> <input id="whoCheckBox" type="checkbox" name="who" checked><label for="whoCheckBox" id="whoLabel">Anyone </label>
    <fieldset>
        <input type="text" id="numPeople" name="numPeople" value= "1" title="people in my party (including myself)"><div id="findPeople"><label for="numAdditionalPeople">looking for</label> <input type="text" id="numAdditionalPeople" value ="1" name="numAdditionalPeople" ><label for="numAdditionalPeople"> more </label> </div>
    </fieldset>
    

    <!--When-->

    <label >When: </label> <input id="whenCheckBox" type="checkbox" name="when" checked><label for="whenCheckBox" id="whenLabel">Anytime</label>
    <fieldset>
        <table>
            <tr>
                <td><label for="fromDate">From: </label></td>
                <td><label for="toDate">To: </label></td>
            </tr>
            <tr>
                <td><input id="fromDate" type="text" name="fromDate" ></td>
                <td><input id="toDate" type="text" name="toDate"></td>
            </tr>
        </table>
    <br>
    </fieldset>

    <!--Where-->

    <label >Where: </label><input id= "whereCheckBox" type="checkbox" name="where" checked><label for="whereCheckBox" id = "whereLabel">Anywhere </label>
    <fieldset >
        <input type="text" id="destination" title= "Enter a Mountain Name, City, State, or Zipcode"  value="" >
    </fieldset>

    <input type="submit" tabindex="-1" style="position:absolute; top:-1000px">
</form> 
</div>
</body>

</html>
